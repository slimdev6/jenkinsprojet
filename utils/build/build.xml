<?xml version="1.0" encoding="UTF-8"?>
<project name="tpj" default="ci" basedir="C:\Users\mohammed.slimani\.jenkins\workspace\tpj">
    <property name="source" value="tpj" />

    <target name="ci"
        description="Tâche principale d'intégration continue"
        depends="clean,qa"/>
    
 <target name="clean" description="Vide les répertoires d'artefacts">
        <delete dir="${project.basedir}/build/api" />
        <delete dir="${project.basedir}/build/code-browser" />
        <delete dir="${project.basedir}/build/coverage" />
        <delete dir="${project.basedir}/build/logs" />
        <delete dir="${project.basedir}/build/pdepend" />
        <mkdir dir="${project.basedir}/build/api" />
        <mkdir dir="${project.basedir}/build/code-browser" />
        <mkdir dir="${project.basedir}/build/coverage" />
        <mkdir dir="${project.basedir}/build/logs" />
        <mkdir dir="${project.basedir}/build/pdepend" />
    </target>

    <target name="qa" description="Lance les outils d'analyse">
        <phingcall target="phpunit" />
    </target>

<target name="phpunit">
    <exec logoutput="true" dir="${project.basedir}/${source}/tests" command="phpunit" escape="false" />
</target>


</project>